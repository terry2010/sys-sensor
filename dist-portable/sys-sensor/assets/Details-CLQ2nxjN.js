import{d as j,r as q,o as y,l as D,a as R,c as E,b as l,t as s,e as G}from"./index-CUsLpGA0.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"details-wrap"},W={class:"grid"},X={class:"item"},K={class:"item"},N={class:"item"},Q={class:"item"},V={class:"item"},A={class:"item"},J={class:"item"},L={class:"item"},Y={class:"item"},Z={class:"item"},z={class:"item"},tt={class:"item"},nt={class:"item"},lt={class:"item"},et={class:"item"},st={class:"item"},it={class:"item"},ut={class:"item"},ot={class:"item"},rt={class:"item"},at=j({__name:"Details",setup(_t){const e=q(null);let r=null;y(async()=>{r=await D("sensor://snapshot",t=>{e.value=t.payload})}),R(()=>{r&&(r(),r=null)});function a(t){if(t==null)return"-";const n=t/1024;return n<1024?`${n.toFixed(1)} KB/s`:`${(n/1024).toFixed(1)} MB/s`}function B(t){if(t==null)return;const n=Math.max(0,Math.floor(t)),i=Math.floor(n/3600),u=Math.floor(n%3600/60),o=n%60;return i>0?`${i}h${u}m`:u>0?`${u}m${o}s`:`${o}s`}function C(t){if(!t||t.length===0)return"—";const n=[];for(let u=0;u<Math.min(3,t.length);u++){const o=t[u],_=o.name??`驱动${u+1}`,d=o.temp_c!=null?`${o.temp_c.toFixed(1)} °C`:"—";n.push(`${_} ${d}`)}let i=n.join(", ");return t.length>3&&(i+=` +${t.length-3}`),i}function M(t){if(!t)return"—";const n=[];t.hb_tick!=null&&n.push(`hb ${t.hb_tick}`),t.idle_sec!=null&&n.push(`idle ${t.idle_sec}s`),t.exc_count!=null&&n.push(`exc ${t.exc_count}`);const i=B(t.uptime_sec);return i&&n.push(`up ${i}`),t.since_reopen_sec!=null&&n.push(`reopen ${t.since_reopen_sec}s`),n.length?n.join(" "):"—"}function U(t){return t==null||!isFinite(t)?"—":`${t.toFixed(1)} W`}function S(t){return t==null||!isFinite(t)?"—":t>=1e3?`${(t/1e3).toFixed(2)} GHz`:`${t.toFixed(0)} MHz`}function w(t){if(!t||t.cpu_throttle_active==null&&(!t.cpu_throttle_reasons||t.cpu_throttle_reasons.length===0))return"—";const n=t.cpu_throttle_active===!0,i=t.cpu_throttle_reasons&&t.cpu_throttle_reasons.length>0?` (${t.cpu_throttle_reasons.join(", ")})`:"";return n?`是${i}`:t.cpu_throttle_active===!1?"否":`—${i}`}function p(t){return t==null||!isFinite(t)?"—":`${t.toFixed(0)} IOPS`}function I(t){return t==null||!isFinite(t)?"—":t<10?t.toFixed(2):t.toFixed(1)}function f(t){return t==null||!isFinite(t)?"—":`${t.toFixed(0)}/s`}function O(t){return t==null||!isFinite(t)?"—":t<1?`${(t*1e3).toFixed(0)} µs`:t<100?`${t.toFixed(1)} ms`:`${t.toFixed(0)} ms`}return(t,n)=>{var i,u,o,_,d,m,v,b,c,$,x,F,g,h,k,P;return G(),E("div",T,[n[20]||(n[20]=l("h2",null,"系统详情",-1)),l("div",W,[l("div",X,[n[0]||(n[0]=l("span",null,"CPU",-1)),l("b",null,s(e.value?e.value.cpu_usage.toFixed(0)+"%":"—"),1)]),l("div",K,[n[1]||(n[1]=l("span",null,"内存",-1)),l("b",null,s(e.value?`${e.value.mem_used_gb.toFixed(1)}/${e.value.mem_total_gb.toFixed(1)} GB (${e.value.mem_pct.toFixed(0)}%)`:"—"),1)]),l("div",N,[n[2]||(n[2]=l("span",null,"CPU温度",-1)),l("b",null,s(((i=e.value)==null?void 0:i.cpu_temp_c)!=null?`${e.value.cpu_temp_c.toFixed(1)} °C`:"—"),1)]),l("div",Q,[n[3]||(n[3]=l("span",null,"主板温度",-1)),l("b",null,s(((u=e.value)==null?void 0:u.mobo_temp_c)!=null?`${e.value.mobo_temp_c.toFixed(1)} °C`:"—"),1)]),l("div",V,[n[4]||(n[4]=l("span",null,"风扇",-1)),l("b",null,s(((o=e.value)==null?void 0:o.fan_rpm)!=null?`${e.value.fan_rpm} RPM`:"—"),1)]),l("div",A,[n[5]||(n[5]=l("span",null,"网络下行",-1)),l("b",null,s(a((_=e.value)==null?void 0:_.net_rx_bps)),1)]),l("div",J,[n[6]||(n[6]=l("span",null,"网络上行",-1)),l("b",null,s(a((d=e.value)==null?void 0:d.net_tx_bps)),1)]),l("div",L,[n[7]||(n[7]=l("span",null,"磁盘读",-1)),l("b",null,s(a((m=e.value)==null?void 0:m.disk_r_bps)),1)]),l("div",Y,[n[8]||(n[8]=l("span",null,"磁盘写",-1)),l("b",null,s(a((v=e.value)==null?void 0:v.disk_w_bps)),1)]),l("div",Z,[n[9]||(n[9]=l("span",null,"存储温度",-1)),l("b",null,s(C((b=e.value)==null?void 0:b.storage_temps)),1)]),l("div",z,[n[10]||(n[10]=l("span",null,"桥接健康",-1)),l("b",null,s(M(e.value)),1)]),l("div",tt,[n[11]||(n[11]=l("span",null,"CPU包功耗",-1)),l("b",null,s(U((c=e.value)==null?void 0:c.cpu_pkg_power_w)),1)]),l("div",nt,[n[12]||(n[12]=l("span",null,"CPU平均频率",-1)),l("b",null,s(S(($=e.value)==null?void 0:$.cpu_avg_freq_mhz)),1)]),l("div",lt,[n[13]||(n[13]=l("span",null,"CPU限频",-1)),l("b",null,s(w(e.value)),1)]),l("div",et,[n[14]||(n[14]=l("span",null,"磁盘读IOPS",-1)),l("b",null,s(p((x=e.value)==null?void 0:x.disk_r_iops)),1)]),l("div",st,[n[15]||(n[15]=l("span",null,"磁盘写IOPS",-1)),l("b",null,s(p((F=e.value)==null?void 0:F.disk_w_iops)),1)]),l("div",it,[n[16]||(n[16]=l("span",null,"磁盘队列",-1)),l("b",null,s(I((g=e.value)==null?void 0:g.disk_queue_len)),1)]),l("div",ut,[n[17]||(n[17]=l("span",null,"网络错误(RX)",-1)),l("b",null,s(f((h=e.value)==null?void 0:h.net_rx_err_ps)),1)]),l("div",ot,[n[18]||(n[18]=l("span",null,"网络错误(TX)",-1)),l("b",null,s(f((k=e.value)==null?void 0:k.net_tx_err_ps)),1)]),l("div",rt,[n[19]||(n[19]=l("span",null,"网络延迟",-1)),l("b",null,s(O((P=e.value)==null?void 0:P.ping_rtt_ms)),1)])])])}}}),ft=H(at,[["__scopeId","data-v-6bf5db26"]]);export{ft as default};
