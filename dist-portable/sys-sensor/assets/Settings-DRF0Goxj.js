import{d as f,r as l,o as g,c as i,b as o,w as r,f as y,v as w,g as v,F as b,h as x,i as u,e as d,t as k}from"./index-BIHLpJ50.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"settings-wrap"},M={class:"group"},S={class:"group"},V={class:"group"},U=["value"],N=f({__name:"Settings",setup(A){const m=l(!1),n=l("cpu"),p=l([]),a=l([]);async function c(){try{const t=await u("get_config"),e=((t==null?void 0:t.tray_bottom_mode)??"").toString();e==="cpu"||e==="mem"||e==="fan"?n.value=e:n.value=t!=null&&t.tray_show_mem?"mem":"cpu",a.value=Array.isArray(t==null?void 0:t.net_interfaces)?t.net_interfaces:[]}catch(t){console.error("[settings] loadConfig",t)}try{p.value=await u("list_net_interfaces")||[]}catch(t){console.warn("[settings] list_net_interfaces",t)}}async function _(){try{const t={tray_bottom_mode:n.value,tray_show_mem:n.value==="mem",net_interfaces:a.value};await u("set_config",{newCfg:t}),console.log("[settings] saved",t)}catch(t){console.error("[settings] save",t)}}return g(()=>{c()}),(t,e)=>(d(),i("div",B,[e[8]||(e[8]=o("h2",null,"快速设置",-1)),o("div",M,[o("label",null,[r(o("input",{type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=s=>m.value=s)},null,512),[[w,m.value]]),e[3]||(e[3]=y(" 随系统启动 ",-1))])]),o("div",S,[e[5]||(e[5]=o("label",null,"托盘第二行显示：",-1)),r(o("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s)},e[4]||(e[4]=[o("option",{value:"cpu"},"CPU%",-1),o("option",{value:"mem"},"内存%",-1),o("option",{value:"fan"},"风扇RPM",-1)]),512),[[v,n.value]])]),o("div",V,[e[6]||(e[6]=o("div",null,"网络速率来源（可多选；不选=聚合全部）：",-1)),r(o("select",{multiple:"","onUpdate:modelValue":e[2]||(e[2]=s=>a.value=s),size:"6",style:{"min-width":"220px"}},[(d(!0),i(b,null,x(p.value,s=>(d(),i("option",{key:s,value:s},k(s),9,U))),128))],512),[[v,a.value]]),e[7]||(e[7]=o("div",{style:{"margin-top":"6px",color:"#888"}},"提示：清空选择即统计所有网卡；保存后生效。",-1))]),o("button",{class:"primary",onClick:_},"保存")]))}}),O=C(N,[["__scopeId","data-v-59b91a7f"]]);export{O as default};
