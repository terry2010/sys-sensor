# sys-sensor 项目开发进度记录

## 2023-06-01
初始化项目，完成基本框架搭建。

## 2023-06-15
实现基础传感器数据采集与展示。

## 2023-07-01
完成托盘图标与基本UI界面。

## 2023-08-01
优化数据采集性能，减少资源占用。

## 2023-09-15
修复SMART盘符显示问题，完善磁盘健康监控。

## 2023-10-20
修复托盘菜单导航问题，优化用户体验。

## 2023-11-30
完成与iStat Menus差距分析，制定优先补全计划。

## 2024-05-28
完成前端UI展示优化，增强磁盘IOPS、队列长度和磁盘活动百分比等指标的可视化展示。具体改进包括：

1. 在系统详情页面添加磁盘活动百分比指标，基于读写IOPS总量进行估算
2. 在磁盘容量详情卡片中增加IOPS读写详情和队列长度指标展示
3. 增加磁盘使用率百分比计算与展示
4. 实现`fmtDiskActivity`和`fmtDiskDetailIOPS`格式化函数，优化数据展示

这些改进使用户能够更直观地监控磁盘性能状态，特别是在高负载情况下识别潜在的磁盘瓶颈。

## 2024-05-29
完成磁盘文件系统信息采集与展示功能，修复磁盘容量详情中文件系统显示为“---”的问题。具体改进包括：

1. 在 LogicalDiskPayload 结构体中添加 fs 字段，用于存储文件系统类型信息
2. 在磁盘采集链路中添加文件系统信息的获取与传递
3. 前端磁盘详情卡片增加文件系统信息展示

## 2024-05-30
完成网络丢包率和活动连接数等网络质量监控指标的实现。具体改进包括：

1. 扩展 NetIfPayload 结构体，添加丢包率、活动连接数、丢弃包数等字段
2. 改进 wmi_perf_net_err 函数，增加对丢弃包的统计与丢包率计算
3. 新增 get_active_connections 函数，使用 PowerShell 命令获取系统活动连接数
4. 将新增指标集成到主数据采集链路中
5. 在 SensorSnapshot 结构体中添加相应字段，实现前后端数据传递

这些改进使用户能够更全面地监控网络质量，包括丢包率和活动连接数等关键指标，有助于及时发现网络异常。

## 2024-05-31
修复网络质量监控指标实现中的编译错误。具体改进包括：

1. 修复 bridge_types.rs 中 SensorSnapshot 结构体缺失的网络丢包率与活动连接数字段
2. 修复 wmi_utils.rs 中 PerfTcpipNic 结构体字段错误，使用 bytes_received_per_sec 和 bytes_sent_per_sec 替代不存在的字段
3. 优化网络包计数算法，基于字节数估算总包数（假设平均包大小为1500字节）
4. 修复类型不匹配问题，将 u64 类型转换为 u32 类型

这些修复确保了网络质量监控指标的正常编译和运行，使用户能够获得更准确的网络状态信息。